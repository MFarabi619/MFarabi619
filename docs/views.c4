views {
    view index {
        title: "System Context"
        description: """
        **Top Level** overview.
        """
        include
          vendors.microvisor-systems,
          microvisor,
          doombsd,
          apollyon-linux,
          tech-stack,
          openws with {
          navigateTo openws
},
    }

    view tech-stack of tech-stack {
        title: "Tech Stack"
        description: """
        Languages, frameworks, conventions, etc.
        """
        include tech-stack.**
    }

    view microvisor of microvisor {
        title: "Microvisor"
        description "Multikernel Build System"
        include
          *,
          tech-stack.operating-systems.*,
          tech-stack
    }

    view userspaces of tech-stack.operating-systems.userspaces {
        title: "Operating Systems"
        include
          *,
          tech-stack.kernels._
    }

    view kernels of tech-stack.kernels {
        title: "Kernels"
        description:  """
        Supported operating system back-ends
        """
        include
          *,
          linux.**
    }

    view microcontrollers of tech-stack.microcontrollers {
        title: "Microcontrollers"
        description:  """
        Supported embedded devices
        """
        include microcontrollers.**
    }

    view vendors of vendors {
    description: "Third-party services"
        include
          *,
          pulumi.*,
          google.**,
          cloudflare.*,
          ui-ux-design.*,
          software-development.*,
          marketing-and-communication.*
    }


    view screenplay-pattern of screenplay-pattern {
    description: "Behavior-Driven Development"
        include *
    }

dynamic view openws {
title  "OpenWS"

include
  openws,
  vendors

person -> vendors.cloudflare {
title "visits"
color blue
technology "HTTPS"
notes '''
- Anyone wanting to go to `([A-Za-z0-9-]+\.)*openws.org`
'''
}

 vendors.cloudflare.dns -> vendors.cloudflare.dns "lookup domain records" {
notes '''
### Tradeoffs
| ðŸ”´ | ðŸŸ¢ |
|-|-|
| Single point of failure | DDOS Protection |
| | High Performance |

- [Source](https://github.com/MFarabi619/MFarabi619/blob/main/config/providers/cloudflare.go)
'''
}

-> vendors.cloudflare.tunnels "resolve to" {
notes '''
- Resolve corresponding domain CNAME record to matching tunnel.
'''
}

  -> openws.caddy.virtual-hosts "route request" {
 technology "HTTP"

notes '''
### Tradeoffs
| ðŸ”´ | ðŸŸ¢ |
|-|-|
| Single point of failure | Easy TLS Termination `https` -> `http` |

- [Source](https://github.com/MFarabi619/MFarabi619/blob/main/modules/nixos/services/cloudflared.nix)
'''
}


 -> openws.caddy.virtual-hosts "lookup domain name" {
notes '''
- [Source](https://github.com/MFarabi619/MFarabi619/blob/main/modules/nixos/services/caddy.nix)

| ðŸ”´ | ðŸŸ¢ |
|-|-|
| Single point of attack | Fast resolution |
|  | Load Balancing |
'''
}

 -> openws.caddy.reverse-proxy "handle route" {
}

parallel  {
openws.caddy.reverse-proxy
-> openws.homepage "openws.org" {
technology "HTTP"
}

openws.caddy.reverse-proxy -> openws.open-webui "ai.openws.org" {
technology "HTTP"
}

openws.caddy.reverse-proxy -> openws.docs "docs.openws.org"{
technology "HTTP"
}
}

openws.open-webui -> openws.ollama "calls"

vendors.cloudflare -> person {
color green
technology "HTTPS"
}
}
    }
